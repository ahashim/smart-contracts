# ðŸ“œ Smart Contracts

The underlying smart-contracts that power [Critter](https://github.com/ahashim/critter).

- [Local Development](#local-development)
- [Testing](#testing)

## Local Development

###### **Requirements**:

- [Node JS](https://nodejs.org) version `^14.8.2`.

###### **Optional**:

- An `.env` file in the project root with your `COINMARKETCAP_API_KEY` if you would like to see realtime currency values in the gas report:

```
COINMARKETCAP_API_KEY=<your-coinmarketcap-api-key>
```

#### Install dependencies

```bash
npm install
```

#### Compile contracts

```bash
npm run compile
```

#### `CRTTR` console

The `CRTTR` console allows local interaction with the deployed Critter contracts via a node repl:

```bash
npm run console
```

Available commands are:

- `hh`: an instance of hardhat, [including all available tasks](https://github.com/ahashim/critter/blob/main/tasks/contract.ts#L15).
- `critter`: returns the deployed contract instance & all available methods on it.
- `platformFee`: The default amount in wei required for payable transactions (like, dislike, resqueak).
- `owner`: returns the `owner` signer account instance & all available methods on it.
  - By default the owner account has all available roles granted to it:
    - `DEFAULT_ADMIN_ROLE`
    - `MINTER_ROLE`
    - `TREASURER_ROLE`
    - `UPGRADER_ROLE`
  - The `owner` signer does not have a Critter account.
- `ahmed`, `barbie`, `carlos`: each returns an individual signer account instance & all available methods on it.
  - **Note:** these are all normal signers which only have `MINTER_ROLE` access, and a single Critter account associated with their address.

## Testing

#### Unit Tests

```bash
npm run test
```

You can also run the tests in watch mode which will rerun all unit-tests whenever a file is changed within the `contracts` or `test` directories.

```bash
npm run watch
```

#### Test Coverage

A test coverage report can be generated by running:

```bash
npm run coverage
```

#### Contract Size

A contract-size report can be generated by running:

```bash
npm run size
```
